<!DOCTYPE html>
<html ng-app="Sunburst">

<head>
  <meta charset="utf-8">
  <title>D3 Sunburst Sequence</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.1/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,600">
  <link rel="stylesheet" href="style.css" />
</head>

<body class="container">

  <!-- header -->
  <header class="page-header">
    <h1>D3 Sunburst Sequence</h1> 
    <p class="text-small">Interactive sunburst visualization of sequential data changes.</p>
  </header>


  <!-- main content -->
  <div class="main" ng-controller="MainCtrl as sunburst">

    <!-- visualization -->
    <h2>Visualization</h2>
    <p>Hover for data summary, click on visualization to reset summary.</p>
    <input id="fileUpload" type="file" on-read-file="sunburst.getData($fileContent)" />
    <div class="visualization">
      <sunburst data="sunburst.data"></sunburst>
    </div>
    <hr />

    <!-- details -->
    <div class="Details">
      <h2>Details</h2>
      <p>
      This is a variation of the original <a href="http://bl.ocks.org/kerryrodden/7090426" target="_blank">sunburst sequence</a>. 
      A major improvement to the original vis is to organize the code base and draw theD3 components (breadcrumbs, sunburst, legend) from a single HTML <code>div</code> tag, and to dynamically assign color and legend scales.
        
      </p>
      <p>
      The other improvement is generalizing and conventionalizing data inputs. 
      The input requires a simple tabular schema of <code>sequence, stage, node, value</code>(see below) and the program will parse the data into a JSON graph.</p>
      <p>The design of the data input therefore makes the visualization more useable on relational database queries, as you can see in the examples provided below.
      The CSV data can be
        unsorted but it must <em>NOT</em> contain a header, and has to conform to the following data column requirements.
        </p>
      <ul>
        <li><code>sequence (int/string):</code> an ordered sequence that clearly defines the grouping of nodes.</li>
        <li><code>stage (int): </code>the index/order of nodes in a given sequence.</li>
        <li><code>node (int/string): </code>the data name of the node.</li>
        <li><code>value (int): </code>the value at each stage of a given sequence. Only the final stage value in a given sequence is used in this visualization.</li>
      </ul>
      <p>For custom testing, load up a file conforming to the data schema described above or you can test out the following sample files:</p>
      <ul>
        <li><a href="data1.csv" target="_blank">Sample 1</a></li>
        <li><a href="data2.csv" target="_blank">Sample 2</a></li>
        <li><a href="data3.csv" target="_blank">Sample 3</a></li>
        <li><a href="data4.csv" target="_blank">Sample 4</a></li>
      </ul>
      <hr />
    </div>


    <!-- data/file preview -->
    <div class="preview">
      <h2>Data</h2>
      <pre>{{ sunburst.data }}</pre>
    </div>
  </div>


  <!-- footer -->
  <footer>
    <p><a href="https://gist.github.com/chrisrzhou/4a41fe71b9be79ec1479" target="_blank">D3 Sunburst Sequence</a> by chrisrzhou, 2014-12-29
      <br />
      <a href="http://github.com/chrisrzhou" target="_blank"><i class="fa fa-github"></i></a> |
      <a href="http://bl.ocks.org/chrisrzhou" target="_blank"><i class="fa fa-th"></i></a> |
      <a href="http://www.linkedin.com/in/chrisrzhou" target="_blank"><i class="fa fa-linkedin"></i></a>
    </p>
  </footer>

  <!-- scripts -->
  <script src="http://code.angularjs.org/1.3.5/angular.js"></script>
  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script src="app.js"></script>
  <script src="sunburst.js"></script>
  <script>
    // Hack to make this example display correctly in an iframe on bl.ocks.org
    d3.select(self.frameElement).style("height", "700px");
  </script>
</body>

</html>